(function(t){function e(e){for(var r,o,i=e[0],c=e[1],u=e[2],d=0,m=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(m.length)m.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],r=!0,i=1;i<a.length;i++){var c=a[i];0!==n[c]&&(r=!1)}r&&(s.splice(e--,1),t=o(o.s=a[0]))}return t}var r={},n={app:0},s=[];function o(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=r,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(a,r,function(e){return t[e]}.bind(null,r));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/socialhub/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),n=a("2f62"),s=a("8c4f"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"pb-10 mb-10",attrs:{"fill-height":""}},[a("v-row",{attrs:{align:"center",justify:"center"}},[a("v-col",{attrs:{sm:"6",lg:"5"}},[a("v-row",{staticClass:"py-10 overline",attrs:{align:"center",justify:"center"}},[a("h1",[t._v(" SocialHub ")])]),a("v-card",{attrs:{elevation:"10"}},[a("v-card-text",[a("v-tabs",{attrs:{color:"black",centered:"","fixed-tabs":""},on:{change:t.resetForms}},[a("v-tab",[t._v(" Sign In ")]),a("v-tab",[t._v(" Sign Up ")]),a("v-tab-item",[t.loginError?a("v-alert",{staticClass:"mt-2",attrs:{type:"error"}},[t._v("An error occured! Please check you credentials and retry. ")]):t._e(),a("v-form",{attrs:{"lazy-validation":""},model:{value:t.validLogin,callback:function(e){t.validLogin=e},expression:"validLogin"}},[a("v-text-field",{attrs:{color:"black",label:"E-mail",rules:t.emailRules,required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{color:"black",label:"Password",rules:t.passwordRules,required:"",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-btn",{staticClass:"white--text",attrs:{width:"100",color:"black",disabled:!t.validLogin},on:{click:t.signIn}},[t.loadingLogin?a("v-progress-circular",{attrs:{size:"25",width:"3",indeterminate:""}}):a("div",[t._v(" Log In ")])],1)],1)],1),a("v-tab-item",[t.signupError?a("v-alert",{staticClass:"mt-2",attrs:{type:"error"}},[t._v("An error occured! Please check you credentials and retry. ")]):t._e(),a("v-form",{attrs:{"lazy-validation":""},model:{value:t.validSignup,callback:function(e){t.validSignup=e},expression:"validSignup"}},[a("v-text-field",{attrs:{color:"black",label:"Username",rules:t.usernameRules,required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),a("v-text-field",{attrs:{color:"black",label:"E-mail",rules:t.emailRules,required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{color:"black",label:"Password",rules:t.passwordRules,required:"",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-btn",{staticClass:"white--text",attrs:{width:"100",color:"black",disabled:!t.validSignup},on:{click:t.signUp}},[t.loadingSignup?a("v-progress-circular",{attrs:{size:"25",width:"3",indeterminate:""}}):a("div",[t._v(" Sign Up ")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},i=[],c=a("5530"),u={name:"AuthPage",data:function(){return{validLogin:!1,validSignup:!1,loadingLogin:!1,loadingSignup:!1,loginError:!1,signupError:!1,username:"",usernameRules:[function(t){return!!t||"Username is required"},function(t){return t&&t.length<=10||"Name must be less than 10 characters"}],email:"",emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/.+@.+\..+/.test(t)||"E-mail must be valid"}],password:"",passwordRules:[function(t){return!!t||"Password is required"},function(t){return t&&t.length>=6||"Password must be at least 6 characters long"}]}},computed:Object(n["c"])(["isAuthenticated"]),created:function(){this.isAuthenticated&&(this.loadUserInformations(),this.$router.push({name:"forum"}))},methods:Object(c["a"])(Object(c["a"])({},Object(n["b"])(["authenticate","register","loadUserInformations"])),{},{resetForms:function(){this.username="",this.email="",this.password=""},signIn:function(){var t=this;this.email&&this.password?(this.loadingLogin=!0,this.loginError=!1,this.authenticate({email:this.email,password:this.password}).then((function(){t.$router.push({path:"/"})})).catch((function(){t.loadingLogin=!1,t.loginError=!0}))):this.validLogin=!1},signUp:function(){var t=this;this.email&&this.password&&this.username?(this.loadingSignup=!0,this.signupError=!1,this.register({username:this.username,email:this.email,password:this.password}).then((function(){t.$router.push({path:"/"})})).catch((function(){t.loadingSignup=!1,t.signupError=!0}))):this.validSignup=!1}})},l=u,d=a("2877"),m=a("6544"),p=a.n(m),f=a("0798"),v=a("8336"),h=a("b0af"),b=a("99d9"),g=a("62ad"),w=a("a523"),k=a("4bd4"),x=a("490a"),j=a("0fd9"),P=a("71a3"),_=a("c671"),y=a("fe57"),C=a("8654"),O=Object(d["a"])(l,o,i,!1,null,null,null),V=O.exports;p()(O,{VAlert:f["a"],VBtn:v["a"],VCard:h["a"],VCardText:b["a"],VCol:g["a"],VContainer:w["a"],VForm:k["a"],VProgressCircular:x["a"],VRow:j["a"],VTab:P["a"],VTabItem:_["a"],VTabs:y["a"],VTextField:C["a"]});var S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-main",[a("HeaderComponent"),a("PostsComponent"),a("v-divider"),a("AddPost")],1)},T=[],R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app-bar",{staticClass:"px-3 overline",attrs:{dark:""}},[a("v-toolbar-title",[t._v(" SocialHub Forum ")]),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:t.logOut}},[a("v-icon",[t._v("mdi-logout")])],1)],1)},E=[],I={name:"HeaderComponent",methods:Object(c["a"])(Object(c["a"])({},Object(n["b"])(["signOff"])),{},{logOut:function(){var t=this;this.signOff().then((function(){t.$router.push({name:"auth"})}))}})},A=I,U=a("40dc"),F=a("132d"),L=a("2fa4"),$=a("2a7f"),q=Object(d["a"])(A,R,E,!1,null,null,null),z=q.exports;p()(q,{VAppBar:U["a"],VBtn:v["a"],VIcon:F["a"],VSpacer:L["a"],VToolbarTitle:$["a"]});var B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-list",{staticClass:"mb-2"},t._l(t.getPosts,(function(t){return a("div",{key:t.id},[a("ForumPost",{attrs:{username:t.username,message:t.content,created_at:t.created_at}}),a("v-divider",{staticClass:"my-4"})],1)})),0)],1)},D=[],J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"mb-2 mx-auto px-4",attrs:{elevation:"3",dark:"","min-height":"200px"}},[a("v-container",{attrs:{fluid:""}},[a("v-row",[a("v-cols",[a("div",{staticClass:"overline mb-4"},[t._v(t._s(t.username))])])],1),a("v-row",[a("v-cols",[a("div",{staticClass:"px-5 pb-2 post-message"},[t._v(t._s(t.message))])])],1),a("v-spacer"),a("v-row",{attrs:{justify:"end"}},[a("v-cols",[a("div",{staticClass:"text-right grey--text"},[t._v(t._s(t.publish_date))])])],1)],1)],1)},H=[],M={name:"ForumPost",props:["username","message","created_at"],computed:{publish_date:function(){var t=new Date(this.created_at),e=new Intl.DateTimeFormat("fr-fr",{weekday:"long",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",fractionalSecondDigits:3,hour12:!0,timeZone:"UTC"});return e.format(t)}}},N=M,W=(a("d9b8"),Object(d["a"])(N,J,H,!1,null,"4e7a37a5",null)),Z=W.exports;p()(W,{VCard:h["a"],VContainer:w["a"],VRow:j["a"],VSpacer:L["a"]});var G={name:"PostsComponent",data:function(){return{}},created:function(){var t=this;this.loadPosts(),this.interval=setInterval((function(){return t.loadPosts()}),1e4)},computed:Object(n["c"])(["getPosts"]),components:{ForumPost:Z},methods:Object(n["b"])(["loadPosts"])},K=G,Q=(a("6f41"),a("ce7e")),X=a("8860"),Y=Object(d["a"])(K,B,D,!1,null,null,null),tt=Y.exports;p()(Y,{VContainer:w["a"],VDivider:Q["a"],VList:X["a"]});var et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{sm:"12",md:"10"}},[a("v-card",{staticClass:"mb-2",attrs:{elevation:"0"}},[a("v-card-title",{staticClass:"overline "},[a("h2",[t._v("Write a Post")])]),a("v-list-item-content",{staticClass:"mx-5"},[a("v-form",{attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-textarea",{staticClass:"mb-1",attrs:{color:"black",label:"Content",rules:t.contentRules,multiline:"",required:""},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),a("v-btn",{staticClass:"float-right white--text",attrs:{color:"black",width:"100",disabled:!t.valid},on:{click:t.addPost}},[t.posting?a("v-progress-circular",{attrs:{size:"25",width:"3",indeterminate:""}}):a("div",[t._v(" Post ")])],1)],1)],1)],1)],1)],1)],1)},at=[],rt={name:"AddPost",data:function(){return{posting:!1,content:"",contentRules:[function(t){return!!t||"Content can't be left empty!"}]}},methods:Object(c["a"])(Object(c["a"])({},Object(n["b"])(["createPost","loadPosts"])),{},{resetForm:function(){this.content=""},addPost:function(){var t=this;this.posting=!0,this.createPost(this.content).then((function(){t.loadPosts(),t.resetForm(),t.posting=!1}))}})},nt=rt,st=a("5d23"),ot=a("a844"),it=Object(d["a"])(nt,et,at,!1,null,null,null),ct=it.exports;p()(it,{VBtn:v["a"],VCard:h["a"],VCardTitle:b["b"],VCol:g["a"],VContainer:w["a"],VForm:k["a"],VListItemContent:st["a"],VProgressCircular:x["a"],VRow:j["a"],VTextarea:ot["a"]});var ut={name:"ForumPage",components:{HeaderComponent:z,PostsComponent:tt,AddPost:ct}},lt=ut,dt=a("f6c4"),mt=Object(d["a"])(lt,S,T,!1,null,null,null),pt=mt.exports;p()(mt,{VDivider:Q["a"],VMain:dt["a"]});a("d3b7"),a("96cf");var ft=a("1da1"),vt=a("bc3a"),ht=a.n(vt),bt={user:null,jwtToken:localStorage.getItem("jwtToken")},gt={isAuthenticated:function(t){return null!==t.jwtToken},getUser:function(t){return t.user}},wt={authenticate:function(t,e){var a=t.commit;return new Promise((function(t,r){ht.a.post("".concat("https://stark-falls-04048.herokuapp.com","/auth/local"),{identifier:e.email,password:e.password}).then((function(e){var r=e.data;a("setUser",r.user),a("setJwtToken",r.jwt),localStorage.setItem("jwtToken",r.jwt),t()})).catch((function(){r()}))}))},register:function(t,e){return Object(ft["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.commit,a.abrupt("return",new Promise((function(t,a){ht.a.post("".concat("https://stark-falls-04048.herokuapp.com","/auth/local/register"),e).then((function(e){var a=e.data;r("setUser",a.user),r("setJwtToken",a.jwt),localStorage.setItem("jwtToken",a.jwt),t()})).catch((function(){a()}))})));case 2:case"end":return a.stop()}}),a)})))()},signOff:function(t){return Object(ft["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.commit,localStorage.removeItem("jwtToken"),a("setJwtToken",null);case 3:case"end":return e.stop()}}),e)})))()},loadUserInformations:function(t){return Object(ft["a"])(regeneratorRuntime.mark((function e(){var a,r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,r=t.state,e.next=3,ht.a.get("".concat("https://stark-falls-04048.herokuapp.com","/users/me"),{headers:{Authorization:"Bearer ".concat(r.jwtToken)}});case 3:n=e.sent,s=n.data,a("setUser",s);case 6:case"end":return e.stop()}}),e)})))()}},kt={setUser:function(t,e){return t.user=e},setJwtToken:function(t,e){return t.jwtToken=e}},xt={state:bt,getters:gt,actions:wt,mutations:kt},jt={allPosts:[]},Pt={getPosts:function(t){return t.allPosts.sort((function(t,e){var a=new Date(t.created_at),r=new Date(e.created_at);return a-r}))}},_t={loadPosts:function(t){return Object(ft["a"])(regeneratorRuntime.mark((function e(){var a,r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,r=t.rootState,e.next=3,ht.a.get("".concat("https://stark-falls-04048.herokuapp.com","/posts"),{headers:{Authorization:"Bearer ".concat(r.auth.jwtToken)}});case 3:n=e.sent,s=n.data,a("updatePosts",s);case 6:case"end":return e.stop()}}),e)})))()},createPost:function(t,e){return Object(ft["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.rootState,a.next=3,ht.a.post("".concat("https://stark-falls-04048.herokuapp.com","/posts"),{username:r.auth.user.username,content:e},{headers:{authorization:"Bearer ".concat(r.auth.jwtToken)}});case 3:case"end":return a.stop()}}),a)})))()}},yt={updatePosts:function(t,e){return t.allPosts=e}},Ct={state:jt,getters:Pt,actions:_t,mutations:yt};r["a"].use(n["a"]);var Ot=new n["a"].Store({modules:{auth:xt,post:Ct}});r["a"].use(s["a"]);var Vt=new s["a"]({mode:"history",base:"/socialhub/",routes:[{path:"/auth",name:"auth",component:V},{path:"/",alias:"/forum",name:"forum",component:pt,beforeEnter:function(t,e,a){Ot.getters.isAuthenticated?(Ot.dispatch("loadUserInformations"),a()):a({name:"auth"})}}]}),St=Vt,Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("router-view")],1)},Rt=[],Et={name:"App",components:{},data:function(){return{}}},It=Et,At=a("7496"),Ut=Object(d["a"])(It,Tt,Rt,!1,null,null,null),Ft=Ut.exports;p()(Ut,{VApp:At["a"]});var Lt=a("f309");r["a"].use(Lt["a"]);var $t=new Lt["a"]({});r["a"].config.productionTip=!1,r["a"].use(n["a"]),new r["a"]({router:St,store:Ot,vuetify:$t,render:function(t){return t(Ft)}}).$mount("#app")},"6f41":function(t,e,a){"use strict";var r=a("7117"),n=a.n(r);n.a},7117:function(t,e,a){},d9b8:function(t,e,a){"use strict";var r=a("f53b"),n=a.n(r);n.a},f53b:function(t,e,a){}});
//# sourceMappingURL=app.126a7ba7.js.map